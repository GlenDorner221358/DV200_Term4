{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/glend/Documents/DV200/KWARTAAL 4/Whirlpool/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/glend/Documents/DV200/KWARTAAL 4/Whirlpool/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/glend/Documents/DV200/KWARTAAL 4/Whirlpool/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Card from'react-bootstrap/Card';import Figure from'react-bootstrap/Figure';import LikeImage from'../icons/thumbs-up.svg';import LikedImage from'../icons/thumbs-up-fill.svg';import{useState,useEffect}from\"react\";import axios from'axios';import Button from'react-bootstrap/Button';import styles from'../pages/css/single.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SingleComment(){var question=JSON.parse(sessionStorage.getItem(\"question\"));var queTitle=question.title;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),comments=_useState2[0],setComments=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLiked=_useState4[0],setIsLiked=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),likedCommentID=_useState6[0],setLikedCommentID=_useState6[1];var permissions=sessionStorage.getItem(\"permissions\");// gets comments based on the currently viewed question\nuseEffect(function(){axios.get(\"http://localhost:5001/api/comments/\"+queTitle).then(function(res){setComments(res.data);}).catch(function(err){return console.log(err);});},[queTitle]);// handles the liking of comments\nvar handleLike=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(commentID,commentLikes){var payload,_payload;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!isLiked){commentLikes=commentLikes+1;setIsLiked(true);setLikedCommentID(commentID);payload={likes:commentLikes};axios.patch('http://localhost:5001/api/updateComment/'+commentID,payload).then(function(res){if(res){console.log(\"Like Updated \"+commentID);}}).catch(function(error){console.log(error);});}else if(likedCommentID===commentID){commentLikes=commentLikes-1;setIsLiked(false);setLikedCommentID(null);_payload={likes:commentLikes};axios.patch('http://localhost:5001/api/updateComment/'+commentID,_payload).then(function(res){if(res){console.log(\"Like Updated \"+commentID);}}).catch(function(error){console.log(error);});}case 1:case\"end\":return _context.stop();}},_callee);}));return function handleLike(_x,_x2){return _ref.apply(this,arguments);};}();// handles comment deletion\nvar handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(commentID){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!(permissions==='true')){_context2.next=10;break;}_context2.prev=1;_context2.next=4;return axios.delete('http://localhost:5001/api/deleteComment/'+commentID);case 4:// Update the state or redirect to reflect the deletion\nconsole.log(\"Comment deleted\");_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}},_callee2,null,[[1,7]]);}));return function handleDelete(_x3){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"comment\",children:comments.map(function(comment){return/*#__PURE__*/_jsxs(Card,{style:{marginLeft:\"12%\",marginRight:\"12%\",marginBottom:\"2%\"},children:[/*#__PURE__*/_jsx(Card.Header,{children:comment.name}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"div\",{className:styles.cardLeft,children:/*#__PURE__*/_jsx(Figure,{children:/*#__PURE__*/_jsx(\"div\",{className:\"left\",children:/*#__PURE__*/_jsxs(\"div\",{style:{width:\"50px\",height:\"30px\"},onClick:function onClick(){return handleLike(comment._id,comment.likes);},children:[/*#__PURE__*/_jsx(Figure.Caption,{style:{display:\"inline\",padding:\"10px\"},children:comment.likes}),/*#__PURE__*/_jsx(Figure.Image,{style:{display:\"inline\"},alt:\"likes icon\",width:\"14px\",height:\"14px\",src:likedCommentID===comment._id?LikedImage:LikeImage})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:styles.cardRight,children:/*#__PURE__*/_jsx(Card.Text,{children:comment.comment})}),permissions==='true'&&/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:function onClick(){return handleDelete(comment._id);},style:{marginTop:\"2%\",float:\"right\"},children:\"Delete Comment\"})]})]});})});}export default SingleComment;","map":{"version":3,"names":["Card","Figure","LikeImage","LikedImage","useState","useEffect","axios","Button","styles","jsx","_jsx","jsxs","_jsxs","SingleComment","question","JSON","parse","sessionStorage","getItem","queTitle","title","_useState","_useState2","_slicedToArray","comments","setComments","_useState3","_useState4","isLiked","setIsLiked","_useState5","_useState6","likedCommentID","setLikedCommentID","permissions","get","then","res","data","catch","err","console","log","handleLike","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","commentID","commentLikes","payload","_payload","wrap","_callee$","_context","prev","next","likes","patch","error","stop","_x","_x2","apply","arguments","handleDelete","_ref2","_callee2","_callee2$","_context2","delete","t0","_x3","className","children","map","comment","style","marginLeft","marginRight","marginBottom","Header","name","Body","cardLeft","width","height","onClick","_id","Caption","display","padding","Image","alt","src","cardRight","Text","variant","marginTop","float"],"sources":["C:/Users/glend/Documents/DV200/KWARTAAL 4/Whirlpool/client/src/components/commentcard.js"],"sourcesContent":["import Card from 'react-bootstrap/Card';\r\nimport Figure from 'react-bootstrap/Figure';\r\nimport LikeImage from '../icons/thumbs-up.svg';\r\nimport LikedImage from '../icons/thumbs-up-fill.svg';\r\nimport { useState, useEffect } from \"react\";\r\nimport axios from 'axios'\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport styles from '../pages/css/single.css'\r\n\r\nfunction SingleComment() {\r\n    const question = JSON.parse(sessionStorage.getItem(\"question\"));\r\n    const queTitle = question.title;\r\n    const [comments, setComments] = useState([]);\r\n    const [isLiked, setIsLiked] = useState(false);\r\n    const [likedCommentID, setLikedCommentID] = useState(null);\r\n    const permissions = sessionStorage.getItem(\"permissions\");\r\n\r\n    // gets comments based on the currently viewed question\r\n    useEffect(() => {\r\n        axios.get(\"http://localhost:5001/api/comments/\" + queTitle)\r\n            .then((res) => {\r\n                setComments(res.data);\r\n            })\r\n            .catch(err => console.log(err))\r\n    }, [queTitle]);\r\n\r\n    // handles the liking of comments\r\n    const handleLike = async (commentID, commentLikes) => {\r\n        if (!isLiked) {\r\n            commentLikes = commentLikes + 1\r\n            setIsLiked(true);\r\n            setLikedCommentID(commentID);\r\n\r\n            let payload = {\r\n                likes: commentLikes\r\n            };\r\n\r\n            axios.patch('http://localhost:5001/api/updateComment/' + commentID, payload)\r\n                .then(res => {\r\n                    if (res) {\r\n                        console.log(\"Like Updated \" + commentID);\r\n                    }\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error);\r\n                });\r\n        } else if (likedCommentID === commentID) {\r\n            commentLikes = commentLikes - 1\r\n            setIsLiked(false);\r\n            setLikedCommentID(null);\r\n\r\n            let payload = {\r\n                likes: commentLikes\r\n            };\r\n\r\n            axios.patch('http://localhost:5001/api/updateComment/' + commentID, payload)\r\n                .then(res => {\r\n                    if (res) {\r\n                        console.log(\"Like Updated \" + commentID);\r\n                    }\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error);\r\n                });\r\n        }\r\n    };\r\n\r\n    // handles comment deletion\r\n    const handleDelete = async (commentID) => {\r\n        if (permissions === 'true') {\r\n            try {\r\n                await axios.delete('http://localhost:5001/api/deleteComment/' + commentID);\r\n                // Update the state or redirect to reflect the deletion\r\n                console.log(\"Comment deleted\")\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"comment\">\r\n            {comments.map((comment) => (\r\n                <Card style={{ marginLeft: \"12%\", marginRight: \"12%\", marginBottom: \"2%\" }}>\r\n                    <Card.Header>{comment.name}</Card.Header>\r\n                    <Card.Body>\r\n                        <div className={styles.cardLeft}>\r\n                            <Figure>\r\n                                <div className=\"left\">\r\n                                    <div style={{ width: \"50px\", height: \"30px\" }} onClick={() => handleLike(comment._id, comment.likes)}>\r\n                                        <Figure.Caption style={{ display: \"inline\", padding: \"10px\" }}>{comment.likes}</Figure.Caption>\r\n                                        <Figure.Image style={{ display: \"inline\" }} alt=\"likes icon\" width=\"14px\" height=\"14px\" src={likedCommentID === comment._id ? LikedImage : LikeImage} />\r\n                                    </div>\r\n                                </div>\r\n                            </Figure>\r\n                        </div>\r\n                        <div className={styles.cardRight}>\r\n                            <Card.Text >\r\n                                {comment.comment}\r\n                            </Card.Text>\r\n                        </div>\r\n                        {permissions === 'true' && (\r\n                            <Button variant=\"danger\" onClick={() => handleDelete(comment._id)} style={{ marginTop: \"2%\", float: \"right\" }}>Delete Comment</Button>\r\n                        )}\r\n                    </Card.Body>\r\n                </Card >\r\n            ))}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SingleComment;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}